<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   Tap Tup - GoTube Style YouTube Client
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: "Roboto", sans-serif;
      background-color: #121212;
      color: #fff;
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    /* Scrollbar for video list */
    #video-list::-webkit-scrollbar {
      height: 6px;
    }
    #video-list::-webkit-scrollbar-thumb {
      background-color: #ff0000;
      border-radius: 3px;
    }
    /* Hide scrollbar for Firefox */
    #video-list {
      scrollbar-width: thin;
      scrollbar-color: #ff0000 transparent;
    }
    /* Line clamp for titles */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }
    /* Bottom nav active icon color */
    .active-icon {
      color: #ff0000 !important;
    }
  </style>
 </head>
 <body class="flex flex-col h-screen">
  <!-- Header -->
  <header class="flex items-center justify-between bg-black px-4 py-2 shadow-md sticky top-0 z-50">
   <div class="flex items-center space-x-2">
    <img alt="Red play button logo for Tap Tup app like GoTube" class="w-8 h-6" height="24" src="https://storage.googleapis.com/a1aa/image/c152a1df-8237-4b17-8b25-d277372abd6d.jpg" width="32"/>
    <h1 class="text-xl font-bold select-none text-white">
     Tap Tup
    </h1>
   </div>
   <form aria-label="Search videos and channels" class="flex flex-1 max-w-xl mx-4" id="search-form" role="search">
    <input aria-label="Search videos and channels" class="flex-grow rounded-l-full px-4 py-2 text-black focus:outline-none" id="search-input" placeholder="Search" required="" type="search"/>
    <button aria-label="Search" class="bg-red-600 hover:bg-red-700 rounded-r-full px-4 flex items-center justify-center" type="submit">
     <i class="fas fa-search text-white">
     </i>
    </button>
   </form>
   <button aria-label="Open menu" class="text-white text-2xl md:hidden focus:outline-none" id="menu-button">
    <i class="fas fa-bars">
    </i>
   </button>
  </header>
  <!-- Video Player Section -->
  <section class="bg-black flex-shrink-0 w-full max-w-4xl mx-auto mt-4 rounded-lg overflow-hidden shadow-lg" id="video-player-section">
   <div class="relative" style="padding-top: 56.25%">
    <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" class="absolute top-0 left-0 w-full h-full" frameborder="0" id="video-player" src="https://www.youtube.com/embed/dQw4w9WgXcQ?autoplay=0&amp;rel=0" title="YouTube video player">
    </iframe>
   </div>
   <div class="px-4 py-3">
    <h2 class="text-white text-lg font-semibold line-clamp-2 mb-1" id="video-title" tabindex="0">
     Rick Astley - Never Gonna Give You Up (Official Music Video)
    </h2>
    <p class="text-red-600 font-medium cursor-pointer hover:underline select-none" id="video-channel" tabindex="0">
     Rick Astley
    </p>
   </div>
  </section>
  <!-- Video List Section -->
  <section aria-label="Search results" class="flex-grow overflow-y-auto mt-4 max-w-4xl mx-auto px-2 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 pb-20" id="video-list">
   <!-- Video cards inserted here dynamically -->
  </section>
  <!-- Bottom Navigation -->
  <nav aria-label="Bottom navigation" class="fixed bottom-0 left-0 right-0 bg-black border-t border-gray-800 flex justify-around items-center h-14 md:hidden z-50" role="navigation">
   <button aria-label="Home" class="flex flex-col items-center justify-center text-red-600 active-icon focus:outline-none" id="nav-home" tabindex="0">
    <i class="fas fa-home fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Home
    </span>
   </button>
   <button aria-label="Trending" class="flex flex-col items-center justify-center text-gray-400 hover:text-red-600 focus:outline-none" id="nav-trending" tabindex="0">
    <i class="fas fa-fire fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Trending
    </span>
   </button>
   <button aria-label="Subscriptions" class="flex flex-col items-center justify-center text-gray-400 hover:text-red-600 focus:outline-none" id="nav-subscriptions" tabindex="0">
    <i class="fas fa-folder fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Subscriptions
    </span>
   </button>
   <button aria-label="Library" class="flex flex-col items-center justify-center text-gray-400 hover:text-red-600 focus:outline-none" id="nav-library" tabindex="0">
    <i class="fas fa-book fa-lg">
    </i>
    <span class="text-xs mt-0.5">
     Library
    </span>
   </button>
  </nav>
  <script>
   // YouTube Data API v3 key (replace with your own key)
    const API_KEY = "YOUR_YOUTUBE_DATA_API_KEY";

    // Elements
    const searchForm = document.getElementById("search-form");
    const searchInput = document.getElementById("search-input");
    const videoList = document.getElementById("video-list");
    const videoPlayer = document.getElementById("video-player");
    const videoTitle = document.getElementById("video-title");
    const videoChannel = document.getElementById("video-channel");

    // Bottom nav buttons
    const navHome = document.getElementById("nav-home");
    const navTrending = document.getElementById("nav-trending");
    const navSubscriptions = document.getElementById("nav-subscriptions");
    const navLibrary = document.getElementById("nav-library");

    // State
    let currentPageToken = "";
    let currentQuery = "";
    let currentMode = "home"; // home, trending, subscriptions, library, search

    // Helper: create video card element
    function createVideoCard(video) {
      const videoId = video.id.videoId || video.id;
      const title = video.snippet.title;
      const channelTitle = video.snippet.channelTitle;
      const thumbnailUrl = video.snippet.thumbnails.medium.url;

      const card = document.createElement("div");
      card.className =
        "bg-gray-900 rounded-lg overflow-hidden cursor-pointer flex flex-col shadow-md hover:shadow-lg";

      const img = document.createElement("img");
      img.src = thumbnailUrl;
      img.alt = `Thumbnail image for video titled ${title}`;
      img.className = "w-full h-36 object-cover";

      const content = document.createElement("div");
      content.className = "p-2 flex flex-col flex-grow";

      const titleEl = document.createElement("h3");
      titleEl.textContent = title;
      titleEl.className = "text-white text-sm font-semibold line-clamp-2";

      const channelEl = document.createElement("p");
      channelEl.textContent = channelTitle;
      channelEl.className = "text-gray-400 text-xs mt-1";

      content.appendChild(titleEl);
      content.appendChild(channelEl);

      card.appendChild(img);
      card.appendChild(content);

      card.addEventListener("click", () => {
        playVideo(videoId, title, channelTitle);
      });

      return card;
    }

    // Play video in player
    function playVideo(videoId, title, channelTitle) {
      videoPlayer.src = `https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0`;
      videoTitle.textContent = title;
      videoChannel.textContent = channelTitle;
      videoChannel.onclick = () => {
        currentQuery = `channel:${videoId}`;
        performSearch(`channel:${videoId}`);
      };
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // Clear active nav button styles
    function clearActiveNav() {
      [navHome, navTrending, navSubscriptions, navLibrary].forEach((btn) => {
        btn.classList.remove("text-red-600", "active-icon");
        btn.classList.add("text-gray-400");
      });
    }

    // Set active nav button style
    function setActiveNav(button) {
      clearActiveNav();
      button.classList.add("text-red-600", "active-icon");
      button.classList.remove("text-gray-400");
    }

    // Perform search using YouTube Data API
    async function performSearch(query) {
      if (!query) return;
      currentMode = "search";
      currentQuery = query;
      setActiveNav(navHome);
      videoList.innerHTML =
        '<p class="col-span-full text-center text-gray-400 mt-10">Loading...</p>';

      let apiUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=24&type=video,channel&q=${encodeURIComponent(
        query
      )}&key=${API_KEY}`;

      // If searching by channel ID (custom syntax channel:CHANNEL_ID), adjust API call
      if (query.startsWith("channel:")) {
        const channelId = query.split(":")[1];
        apiUrl = `https://www.googleapis.com/youtube/v3/search?part=snippet&maxResults=24&type=video&channelId=${channelId}&key=${API_KEY}`;
      }

      try {
        const response = await fetch(apiUrl);
        const data = await response.json();

        if (!data.items || data.items.length === 0) {
          videoList.innerHTML =
            '<p class="col-span-full text-center text-gray-400 mt-10">No results found.</p>';
          return;
        }

        videoList.innerHTML = "";
        data.items.forEach((item) => {
          // Only show videos (ignore channels in results for simplicity)
          if (item.id.kind === "youtube#video") {
            const card = createVideoCard(item);
            videoList.appendChild(card);
          }
        });
      } catch (error) {
        videoList.innerHTML =
          '<p class="col-span-full text-center text-red-600 mt-10">Error loading results.</p>';
        console.error(error);
      }
    }

    // Load trending videos
    async function loadTrending() {
      currentMode = "trending";
      setActiveNav(navTrending);
      videoList.innerHTML =
        '<p class="col-span-full text-center text-gray-400 mt-10">Loading trending videos...</p>';
      const apiUrl = `https://www.googleapis.com/youtube/v3/videos?part=snippet&chart=mostPopular&maxResults=24&regionCode=US&key=${API_KEY}`;
      try {
        const response = await fetch(apiUrl);
        const data = await response.json();
        if (!data.items || data.items.length === 0) {
          videoList.innerHTML =
            '<p class="col-span-full text-center text-gray-400 mt-10">No trending videos found.</p>';
          return;
        }
        videoList.innerHTML = "";
        data.items.forEach((video) => {
          const item = {
            id: video.id,
            snippet: video.snippet,
          };
          const card = createVideoCard(item);
          videoList.appendChild(card);
        });
      } catch (error) {
        videoList.innerHTML =
          '<p class="col-span-full text-center text-red-600 mt-10">Error loading trending videos.</p>';
        console.error(error);
      }
    }

    // Load subscriptions placeholder (since no user auth, show popular channels)
    async function loadSubscriptions() {
      currentMode = "subscriptions";
      setActiveNav(navSubscriptions);
      videoList.innerHTML =
        '<p class="col-span-full text-center text-gray-400 mt-10">Loading subscriptions...</p>';
      // For demo, show popular channels (simulate subscriptions)
      const popularChannels = [
        "UC-9-kyTW8ZkZNDHQJ6FgpwQ", // Music
        "UCq-Fj5jknLsUf-MWSy4_brA", // Gaming
        "UC295-Dw_tDNtZXFeAPAW6Aw", // News
        "UCJowOS1R0FnhipXVqEnYU1A", // Movies
        "UCYfdidRxbB8Qhf0Nx7ioOYw", // Sports
        "UCOpNcN46UbXVtpKMrmU4Abg", // Tech
      ];
      videoList.innerHTML = "";
      for (const channelId of popularChannels) {
        try {
          const response = await fetch(
            `https://www.googleapis.com/youtube/v3/channels?part=snippet&id=${channelId}&key=${API_KEY}`
          );
          const data = await response.json();
          if (data.items && data.items.length > 0) {
            const channel = data.items[0];
            const card = document.createElement("div");
            card.className =
              "bg-gray-900 rounded-lg overflow-hidden cursor-pointer flex flex-col shadow-md hover:shadow-lg";

            const img = document.createElement("img");
            img.src = channel.snippet.thumbnails.medium.url;
            img.alt = `Channel logo for ${channel.snippet.title}`;
            img.className = "w-full h-36 object-cover";

            const content = document.createElement("div");
            content.className = "p-2 flex flex-col flex-grow";

            const titleEl = document.createElement("h3");
            titleEl.textContent = channel.snippet.title;
            titleEl.className = "text-white text-sm font-semibold line-clamp-2";

            content.appendChild(titleEl);

            card.appendChild(img);
            card.appendChild(content);

            card.addEventListener("click", () => {
              performSearch(`channel:${channelId}`);
            });

            videoList.appendChild(card);
          }
        } catch (error) {
          console.error("Error loading subscription channel", error);
        }
      }
    }

    // Load library placeholder (simulate history or liked videos)
    async function loadLibrary() {
      currentMode = "library";
      setActiveNav(navLibrary);
      videoList.innerHTML =
        '<p class="col-span-full text-center text-gray-400 mt-10">Loading library...</p>';
      // For demo, show liked videos (hardcoded popular videos)
      const likedVideoIds = [
        "3JZ_D3ELwOQ",
        "kJQP7kiw5Fk",
        "RgKAFK5djSk",
        "fRh_vgS2dFE",
        "OPf0YbXqDm0",
        "09R8_2nJtjg",
      ];
      videoList.innerHTML = "";
      for (const videoId of likedVideoIds) {
        try {
          const response = await fetch(
            `https://www.googleapis.com/youtube/v3/videos?part=snippet&id=${videoId}&key=${API_KEY}`
          );
          const data = await response.json();
          if (data.items && data.items.length > 0) {
            const video = data.items[0];
            const item = {
              id: video.id,
              snippet: video.snippet,
            };
            const card = createVideoCard(item);
            videoList.appendChild(card);
          }
        } catch (error) {
          console.error("Error loading library video", error);
        }
      }
    }

    // Event listeners
    searchForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const query = searchInput.value.trim();
      if (query) {
        performSearch(query);
      }
    });

    navHome.addEventListener("click", () => {
      currentMode = "home";
      searchInput.value = "";
      loadTrending();
    });
    navTrending.addEventListener("click", () => {
      loadTrending();
    });
    navSubscriptions.addEventListener("click", () => {
      loadSubscriptions();
    });
    navLibrary.addEventListener("click", () => {
      loadLibrary();
    });

    // Initialize app with trending videos
    loadTrending();
  </script>
 </body>
</html>
